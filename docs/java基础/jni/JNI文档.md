## Hello World
1、首先编写测试类：
```java
public class Test{
    static {
        // 加载动态模块，注意：这里使用load方法需要填写库的全路径，而使用loadLibrary只需要填写库名进行，但是需要启动的时候
        // 指定-Djava.library.path参数来告诉JVM需要去哪儿加载动态库
        System.loadLibrary("test");
    }
    
    public static void main(String[] args){
        Test test = new Test();
        System.out.println("当前获取到的数值是：" + test.get());
    }
    
    /**
     * 本地方法，返回一个数值 
     * @return 返回的数值
     */
    public native int get();
}
```

```java
public class Test{
    
    public static void main(String[] args){
      System.out.println(new Test().create());
    }
    
    public native User create();
    
    public static class User{
        private int age;
        
        public int getAge(){
            return age;
        }
        
        public void setAge(int age){
            this.age = age;
        }
        
        public String toString(){
            return "user age: " + age;
        }
        
    }
}
```


2、使用javac编译该类
3、然后使用`javah -jni Test`命令自动生成头文件，注意这里要使用类名，而不是文件名；
4、使用`cp Test.h Test.c`copy出来一个c文件；
5、copy出来的c文件如下：
```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class Test */

#ifndef _Included_Test
#define _Included_Test
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     Test
 * Method:    get
 * Signature: ()I
 */
JNIEXPORT jint JNICALL Java_Test_get
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif
```
6、补充里边的函数定义，结果如下：
```
#include <jni.h>
/* Header for class Test */

#ifndef _Included_Test
#define _Included_Test
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     Test
 * Method:    get
 * Signature: ()I
 */
JNIEXPORT jint JNICALL Java_Test_get
  (JNIEnv * env, jobject obj){
    return 1;
  }

#ifdef __cplusplus
}
#endif
#endif
```
7、生成动态库，生成方法有两种：
- 1、使用命令`gcc -fPIC -shared Test.c -o libtest.so`生成
- 2、先使用命令`gcc -fPIC -c Test.c -o test.o`编译c文件，然后使用`gcc -shared Test.o -o libtest.so`编译生成动态库；

编译注意事项：
```
注意，编译的时候要通过-l的方式指定头文件存放位置，或者将下面的变量添加到~/.bash_profile文件里边

C_INCLUDE_PATH=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.242.b08-0.el7_7.i386/include:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.242.b08-0.el7_7.i386/include/linux
export C_INCLUDE_PATH

注意，需要将文件夹替换为你机器上的实际的文件夹，这个是我机器上的
```

8、运行，运行方式有两种，如果代码中是使用`System.load`的方式写死动态库路径加载的，那么直接使用`java Test`即可运行，否则要使
用`java -Djava.library.path=动态库路径 Test`来运行；

## 其他
JNI头文件定义：http://home.pacifier.com/~mmead/jni/cs510ajp/jni.h